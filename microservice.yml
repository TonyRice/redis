omg: 1
lifecycle:
  startup:
    command: ["python", "/app/app.py"]
commands:
  set: &key_value_required
    http: &http
      path: /set
      port: 8000
      method: post
      contentType: application/json
    arguments:
      key: &key
        type: string
        in: requestBody
        required: true
      value: &value
        type: any
        in: requestBody
        required: true
  rpush:
    <<: *key_value_required
    http:
      <<: *http
      path: /rpush
  lpush:
    <<: *key_value_required
    http:
      <<: *http
      path: /lpush
  lpop: &key_required
    http:
      <<: *http
      path: /lpop
    arguments:
      key:
        <<: *key
  rpop:
    <<: *key_required
    http:
      <<: *http
      path: /rpop
  blpop:
    <<: *key_required
    http:
      <<: *http
      path: /blpop
  brpop:
    <<: *key_required
    http:
      <<: *http
      path: /brpop
  del:
    <<: *key_required
    http:
      <<: *http
      path: /del
  get:
    <<: *key_required
    http:
      <<: *http
      path: /get
  expire:
    http:
      <<: *http
      path: /expire
    arguments:
      key:
        <<: *key
      seconds:
        in: requestBody
        type: int
        required: true

environment:
  REDIS_HOST:
  REDIS_PORT:
  REDIS_DB:
  REDIS_PASSWORD:
